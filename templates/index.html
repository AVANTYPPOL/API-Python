<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ride Share Pricing API</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .endpoint {
            background: #f8f9fa;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        .method {
            background: #007bff;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .method.post { background: #28a745; }
        .method.get { background: #17a2b8; }
        code {
            background: #e9ecef;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .json-example {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .status {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
        }
        .status.healthy { background: #d4edda; color: #155724; }
        .feature {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        .feature-icon {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            background: #28a745;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöó Ride Share Pricing API</h1>
        
        <div class="card">
            <h2>üéØ API Overview</h2>
            <p>Production-ready ML API for dynamic ride pricing using hybrid transfer learning (NYC + Miami data).</p>
            
            <div class="feature">
                <div class="feature-icon">‚úì</div>
                <span><strong>89.8% Accuracy</strong> - R¬≤ Score: 0.8983</span>
            </div>
            <div class="feature">
                <div class="feature-icon">‚ö°</div>
                <span><strong>Low Latency</strong> - RMSE: $1.46</span>
            </div>
            <div class="feature">
                <div class="feature-icon">üîß</div>
                <span><strong>Multiple Services</strong> - UberX, UberXL, Premier, Premier SUV</span>
            </div>
            <div class="feature">
                <div class="feature-icon">üåê</div>
                <span><strong>Cloud Ready</strong> - Docker + Gunicorn deployment</span>
            </div>
        </div>

        <div class="grid">
            <div class="endpoint">
                <h3><span class="method get">GET</span> /health</h3>
                <p>Health check endpoint for monitoring and load balancers</p>
                <div class="json-example">
{
  "status": "healthy",
  "timestamp": "2024-01-15T10:30:00.123456",
  "model_loaded": true
}</div>
            </div>

            <div class="endpoint">
                <h3><span class="method get">GET</span> /model/info</h3>
                <p>Get detailed information about the ML model</p>
                <div class="json-example">
{
  "model_type": "Hybrid Uber Price Model",
  "accuracy": "89.8% (R¬≤ = 0.8983)",
  "supported_services": ["UberX", "UberXL", "Uber Premier", "Premier SUV"]
}</div>
            </div>
        </div>

        <div class="endpoint">
            <h3><span class="method post">POST</span> /predict</h3>
            <p>Predict ride price based on location, time, and conditions</p>
            
            <h4>Required Parameters:</h4>
            <ul>
                <li><code>pickup_lat</code> - Pickup latitude (-90 to 90)</li>
                <li><code>pickup_lng</code> - Pickup longitude (-180 to 180)</li>
                <li><code>dropoff_lat</code> - Dropoff latitude (-90 to 90)</li>
                <li><code>dropoff_lng</code> - Dropoff longitude (-180 to 180)</li>
                <li><code>distance_km</code> - Distance in kilometers</li>
            </ul>

            <h4>Optional Parameters:</h4>
            <ul>
                <li><code>hour_of_day</code> - Hour (0-23, default: current hour)</li>
                <li><code>day_of_week</code> - Day (0-6, default: current day)</li>
                <li><code>surge_multiplier</code> - Surge multiplier (default: 1.0)</li>
                <li><code>traffic_level</code> - Traffic: 'light', 'moderate', 'heavy' (default: 'moderate')</li>
                <li><code>weather_condition</code> - Weather: 'clear', 'rain', 'snow' (default: 'clear')</li>
            </ul>

            <h4>Request Example:</h4>
            <div class="json-example">
{
  "pickup_lat": 25.7617,
  "pickup_lng": -80.1918,
  "dropoff_lat": 25.7907,
  "dropoff_lng": -80.1300,
  "distance_km": 8.5,
  "hour_of_day": 19,
  "day_of_week": 5,
  "surge_multiplier": 1.2,
  "traffic_level": "moderate",
  "weather_condition": "clear"
}</div>

            <h4>Response Example:</h4>
            <div class="json-example">
{
  "success": true,
  "prediction": {
    "base_price": 14.80,
    "price_per_km": 1.74,
    "service_prices": {
      "UberX": 14.80,
      "UberXL": 20.72,
      "Uber Premier": 26.64,
      "Premier SUV": 32.56
    },
    "parameters": {
      "distance_km": 8.5,
      "pickup_coordinates": [25.7617, -80.1918],
      "dropoff_coordinates": [25.7907, -80.1300],
      "surge_multiplier": 1.2
    }
  },
  "timestamp": "2024-01-15T10:30:00.123456"
}</div>
        </div>

        <div class="endpoint">
            <h3><span class="method post">POST</span> /predict/batch</h3>
            <p>Predict prices for multiple rides in a single request</p>
            
            <h4>Request Example:</h4>
            <div class="json-example">
{
  "rides": [
    {
      "pickup_lat": 25.7617,
      "pickup_lng": -80.1918,
      "dropoff_lat": 25.7907,
      "dropoff_lng": -80.1300,
      "distance_km": 8.5
    },
    {
      "pickup_lat": 25.7959,
      "pickup_lng": -80.2870,
      "dropoff_lat": 25.7617,
      "dropoff_lng": -80.1918,
      "distance_km": 15.0
    }
  ]
}</div>
        </div>

        <div class="card">
            <h2>üöÄ Quick Start</h2>
            <h3>Test the API:</h3>
            <div class="json-example">
# Health check
curl -X GET http://localhost:5000/health

# Price prediction
curl -X POST http://localhost:5000/predict \
  -H "Content-Type: application/json" \
  -d '{
    "pickup_lat": 25.7617,
    "pickup_lng": -80.1918,
    "dropoff_lat": 25.7907,
    "dropoff_lng": -80.1300,
    "distance_km": 8.5,
    "surge_multiplier": 1.2
  }'</div>

            <h3>Integration Examples:</h3>
            <div class="json-example">
// JavaScript/React
const response = await fetch('/predict', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    pickup_lat: 25.7617,
    pickup_lng: -80.1918,
    dropoff_lat: 25.7907,
    dropoff_lng: -80.1300,
    distance_km: 8.5
  })
});
const data = await response.json();
console.log('Predicted price:', data.prediction.base_price);</div>
        </div>

        <div class="card">
            <h2>üìä Model Performance</h2>
            <ul>
                <li><strong>Accuracy:</strong> 89.8% (R¬≤ = 0.8983)</li>
                <li><strong>RMSE:</strong> $1.46</li>
                <li><strong>Training Data:</strong> 51,966 rides (NYC + Miami)</li>
                <li><strong>Miami Weight:</strong> 99.9% (local adaptation)</li>
                <li><strong>Calibration Factor:</strong> 0.779</li>
            </ul>
        </div>

        <footer style="text-align: center; margin-top: 40px; color: #666;">
            <p>üèñÔ∏è Miami Uber Dynamic Pricing API - Production Ready</p>
        </footer>
    </div>
</body>
</html> 